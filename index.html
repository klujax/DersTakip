<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ders devamsÄ±zlÄ±k takibi, not alma ve profil yÃ¶netimi">
    <title>EylÃ¼l'Ã¼n Ders Takibi</title>
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ec4899">
    <link rel="apple-touch-icon" href="icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js');
            });
        }
    </script>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <button class="mobile-menu-btn" id="mobileMenuBtn">â˜°</button>
    <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <h2>Enes ğŸ’– EylÃ¼l</h2>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-section="home">
                    <span class="nav-icon">âœ¨</span>
                    <span>Anasayfa</span>
                </button>
                <button class="nav-item" data-section="devamsizlik">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span>DevamsÄ±zlÄ±k</span>
                </button>
                <button class="nav-item" data-section="notlar">
                    <span class="nav-icon">ğŸ““</span>
                    <span>NotlarÄ±m</span>
                </button>
                <button class="nav-item" data-section="dersprogrami">
                    <span class="nav-icon">ğŸ“…</span>
                    <span>Ders ProgramÄ±</span>
                </button>
                <button class="nav-item" data-section="haftalikplan">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span>HaftalÄ±k Plan</span>
                </button>
                <button class="nav-item" data-section="profil">
                    <span class="nav-icon">ğŸ’</span>
                    <span>Profilim</span>
                </button>
                <button class="nav-item" data-section="copkovasi">
                    <span class="nav-icon">ğŸ—‘ï¸</span>
                    <span>Ã‡Ã¶p KovasÄ±</span>
                </button>
            </nav>
            <div class="sidebar-footer">
                <p>Â© 2026 Ders Takip</p>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-wrapper">
            <!-- Header -->
            <header class="top-bar">
                <div class="welcome-text">
                    <h1 id="pageTitle">Anasayfa Ã–zet</h1>
                    <p id="currentDate"></p>
                </div>
                <div class="user-info-brief" onclick="navigateTo('profil')" style="cursor:pointer">
                    <img id="headerAvatar" src="" alt="Profil" class="header-avatar">
                </div>
            </header>

            <div class="content-area">
                <!-- Section: Home (Dashboard) -->
                <section id="home-section" class="app-section active">
                    <div class="home-grid">
                        <!-- Stats Grid -->
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-icon-wrapper pink">ğŸ“–</div>
                                <div class="stat-content">
                                    <h3 id="statTotalLessons">0</h3>
                                    <p>Toplam Ders</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon-wrapper emerald">ğŸ›¡ï¸</div>
                                <div class="stat-content">
                                    <h3 id="statTotalAbsence">0</h3>
                                    <p>DevamsÄ±zlÄ±k</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon-wrapper orange">ğŸ–‡ï¸</div>
                                <div class="stat-content">
                                    <h3 id="statTotalNotes">0</h3>
                                    <p>Notlar</p>
                                </div>
                            </div>
                        </div>

                        <!-- Today's Plan (Big Focus) -->
                        <div class="today-focus-card">
                            <h2>âœ¨ BugÃ¼nÃ¼n Odak NoktasÄ±</h2>
                            <div id="homeTodayPlan" class="focus-content">
                                <!-- BugÃ¼nÃ¼n planÄ± buraya gelecek -->
                            </div>
                        </div>

                        <!-- Right Column: Summary & Activity -->
                        <div class="dashboard-summ-grid">
                            <div class="dashboard-card">
                                <h3>ğŸ“Š Son Durum</h3>
                                <div id="quickSummary" class="summary-list"
                                    style="display:flex; flex-direction:column; gap:12px">
                                    <!-- Ã–zet bilgiler -->
                                </div>
                            </div>
                        </div>

                        <!-- Full Width Schedule View -->
                        <div class="home-schedule-card">
                            <div
                                style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
                                <h3
                                    style="font-family:'Outfit', sans-serif; font-size:1.3rem; font-weight:800; color:var(--text-head)">
                                    ğŸ“… Ders ProgramÄ±m</h3>
                                <div style="font-size:0.85rem; color:var(--text-dim); font-weight:600">Bu HaftalÄ±k AkÄ±ÅŸ
                                </div>
                            </div>
                            <div id="homeScheduleView" class="home-schedule-grid">
                                <!-- Ders programÄ± buraya yÃ¼klenecek -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section: Attendance (Existing) -->
                <section id="devamsizlik-section" class="app-section">
                    <div class="section-controls">
                        <h2>Ders DevamsÄ±zlÄ±k Takibi</h2>
                        <button class="add-btn" id="addLessonBtn"><span>+</span> Ders Ekle</button>
                    </div>
                    <div class="lessons-grid" id="lessonsGrid"></div>
                </section>

                <!-- Section: Notes (Existing) -->
                <section id="notlar-section" class="app-section">
                    <div class="notes-header" style="display:flex; justify-content:space-between; align-items:center;">
                        <h2>ğŸ““ Ders NotlarÄ±</h2>
                        <button class="add-btn" id="addNoteBtn"><span>+</span> Not Ekle</button>
                    </div>

                    <!-- Normal Notlar -->
                    <div class="notes-grid" id="notesGrid"></div>
                </section>

                <!-- Section: Ders ProgramÄ± -->
                <section id="dersprogrami-section" class="app-section">
                    <div class="section-controls">
                        <h2>ğŸ“… Ders ProgramÄ±</h2>
                    </div>

                    <!-- FotoÄŸraf YÃ¼kleme -->
                    <div class="schedule-upload-area">
                        <div class="upload-box" id="uploadBox">
                            <input type="file" id="scheduleFile" accept="image/*,.pdf" style="display:none">
                            <div class="upload-content" onclick="document.getElementById('scheduleFile').click()">
                                <span style="font-size:3.5rem; display:block; margin-bottom:15px">ğŸ“¸</span>
                                <h3 style="color:var(--brand-primary); margin-bottom:10px">Program FotoÄŸrafÄ± YÃ¼kle</h3>
                                <p style="color:var(--text-dim)">Veya manuel giriÅŸ yapmak iÃ§in aÅŸaÄŸÄ± kaydÄ±rÄ±n</p>
                            </div>
                        </div>
                        <div id="schedulePreview" class="schedule-preview"></div>
                    </div>

                    <!-- Manuel Ã‡etele -->
                    <div class="manual-schedule">
                        <h3 style="margin: 30px 0 20px; font-family:'Outfit', sans-serif; color:var(--text-head)">ğŸ“
                            Veya Manuel GiriÅŸ</h3>
                        <div class="schedule-grid" id="scheduleTable">
                            <div class="schedule-day">
                                <div class="day-header">Pazartesi</div>
                                <textarea class="day-input" data-day="pazartesi"
                                    placeholder="09:00 - Matematik&#10;10:00 - Fizik..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">SalÄ±</div>
                                <textarea class="day-input" data-day="sali" placeholder="Dersleri girin..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">Ã‡arÅŸamba</div>
                                <textarea class="day-input" data-day="carsamba"
                                    placeholder="Dersleri girin..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">PerÅŸembe</div>
                                <textarea class="day-input" data-day="persembe"
                                    placeholder="Dersleri girin..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">Cuma</div>
                                <textarea class="day-input" data-day="cuma" placeholder="Dersleri girin..."></textarea>
                            </div>
                        </div>
                        <button class="add-btn" id="saveScheduleBtn"
                            style="margin-top:20px; background:var(--brand-accent)">ğŸ’¾ ProgramÄ± Kaydet</button>
                    </div>
                </section>

                <!-- Section: HaftalÄ±k Plan -->
                <section id="haftalikplan-section" class="app-section">
                    <div class="section-controls">
                        <h2>ğŸ“‹ HaftalÄ±k Plan & GÃ¶revler</h2>
                    </div>
                    <p style="margin-bottom:20px; color:var(--text-muted)">Her gÃ¼n iÃ§in gÃ¶rev ekle, tamamladÄ±kÃ§a tik at!
                    </p>

                    <!-- GÃ¶rev Ekleme -->
                    <div class="task-add-form" style="margin-bottom:30px">
                        <div class="profile-details-grid"
                            style="grid-template-columns: 2fr 1fr auto; gap: 15px; align-items: flex-end;">
                            <div>
                                <label
                                    style="display:block; margin-bottom:8px; font-weight:700; font-family:'Outfit',sans-serif; color:var(--text-head)">GÃ¶rev
                                    AdÄ±</label>
                                <input type="text" id="newTaskText" placeholder="Ã–rn: Analiz dersine Ã§alÄ±ÅŸ..."
                                    style="margin-bottom:0">
                            </div>
                            <div>
                                <label
                                    style="display:block; margin-bottom:8px; font-weight:700; font-family:'Outfit',sans-serif; color:var(--text-head)">GÃ¼n</label>
                                <select id="newTaskDay" style="margin-bottom:0">
                                    <option value="pazartesi">Pazartesi</option>
                                    <option value="sali">SalÄ±</option>
                                    <option value="carsamba">Ã‡arÅŸamba</option>
                                    <option value="persembe">PerÅŸembe</option>
                                    <option value="cuma">Cuma</option>
                                    <option value="cumartesi">Cumartesi</option>
                                    <option value="pazar">Pazar</option>
                                </select>
                            </div>
                            <button class="add-btn" id="addTaskBtn" style="padding:16px 30px">â• GÃ¶rev Ekle</button>
                        </div>
                    </div>

                    <!-- GÃ¼nlÃ¼k GÃ¶rev Listesi -->
                    <div class="weekly-tasks-grid" id="weeklyTasksGrid">
                        <!-- GÃ¶revler JavaScript ile doldurulacak -->
                    </div>
                </section>
                <section id="profil-section" class="app-section">
                    <div class="profile-container">
                        <!-- Profile Header Card -->
                        <div class="profile-header-card">
                            <div class="profile-avatar-large" id="profileAvatarDisplay"
                                style="position:relative; cursor:pointer"
                                onclick="document.getElementById('profilePhotoInput').click()">
                                <img id="profilePhoto" src="" alt="Profil FotoÄŸrafÄ±"
                                    style="width:100%; height:100%; object-fit:cover; border-radius:40px; display:none">
                                <span id="profileInitials">ğŸ‘¤</span>
                                <input type="file" id="profilePhotoInput" accept="image/*" style="display:none"
                                    onchange="handleProfilePhoto(event)">
                                <div
                                    style="position:absolute; bottom:-5px; right:-5px; background:var(--brand-primary); width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; border:3px solid white">
                                    ğŸ“·</div>
                            </div>
                            <div class="profile-info-large">
                                <h2 id="profileName">Ã–ÄŸrenci Ä°smi</h2>
                                <p id="profileSchool">Okul / BÃ¶lÃ¼m</p>
                            </div>
                        </div>

                        <!-- Profile Edit Form -->
                        <div class="profile-details-grid">
                            <div class="detail-card">
                                <h3>ğŸ“ KiÅŸisel Bilgiler</h3>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">Ad
                                        Soyad</label>
                                    <input type="text" id="editName" placeholder="Ad Soyad">
                                </div>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">Okul
                                        / Ãœniversite</label>
                                    <input type="text" id="editSchool" placeholder="Okul AdÄ±">
                                </div>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">BÃ¶lÃ¼m
                                        / Alan</label>
                                    <input type="text" id="editDepartment" placeholder="BÃ¶lÃ¼m / Alan">
                                </div>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">SÄ±nÄ±f</label>
                                    <select id="editGrade">
                                        <option value="HazÄ±rlÄ±k">HazÄ±rlÄ±k</option>
                                        <option value="1. SÄ±nÄ±f">1. SÄ±nÄ±f</option>
                                        <option value="2. SÄ±nÄ±f">2. SÄ±nÄ±f</option>
                                        <option value="3. SÄ±nÄ±f">3. SÄ±nÄ±f</option>
                                        <option value="4. SÄ±nÄ±f">4. SÄ±nÄ±f</option>
                                        <option value="YÃ¼ksek Lisans">YÃ¼ksek Lisans</option>
                                        <option value="Doktora">Doktora</option>
                                    </select>
                                </div>
                                <button class="add-btn" onclick="saveProfile()"
                                    style="width:100%; justify-content:center">ğŸ’¾ Bilgileri Kaydet</button>
                            </div>
                            <div class="detail-card">
                                <h3>ğŸ“Š Ä°statistikler</h3>
                                <div class="info-row"><span>KayÄ±tlÄ± Ders:</span> <strong id="p-lessons">0</strong></div>
                                <div class="info-row"><span>Toplam DevamsÄ±zlÄ±k:</span> <strong id="p-absence">0
                                        Saat</strong></div>
                                <div class="info-row"><span>Kritik Ders:</span> <strong id="p-critical">0</strong></div>
                                <div class="info-row"><span>KayÄ±tlÄ± Not:</span> <strong id="p-notes">0</strong></div>
                                <div class="info-row" style="margin-top:20px"><span>Durum:</span> <span
                                        class="status-badge safe">Aktif Ã–ÄŸrenci</span></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section: Trash -->
                <section id="copkovasi-section" class="app-section">
                    <div class="notes-header"
                        style="margin-bottom:30px; display:flex; justify-content:space-between; align-items:center;">
                        <h2>ğŸ—‘ï¸ Ã‡Ã¶p KovasÄ±</h2>
                        <button class="add-btn" id="emptyTrashBtn" style="background:var(--brand-primary)">
                            ğŸ—‘ï¸ Ã‡Ã¶pÃ¼ Temizle
                        </button>
                    </div>
                    <div class="trash-grid" id="trashGrid">
                        <!-- Silinenler buraya -->
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals (Ders Ekleme ve Not Ekleme modallarÄ± aynÄ± kalacak ama CSS'de sidebar'a gÃ¶re ayarlanacak) -->
    <div class="modal-overlay" id="lessonModal">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h3>Yeni Ders Ekle</h3>
                <button class="close-btn" id="closeLessonModal">&times;</button>
            </div>
            <form id="lessonForm">
                <div class="form-group">
                    <label for="lessonName">Ders AdÄ±</label>
                    <input type="text" id="lessonName" placeholder="Ã–rn: Teknik Resim" required>
                </div>
                <div class="form-group toggle-group">
                    <div class="toggle-row">
                        <span class="toggle-text">Alt dersler var mÄ±?</span>
                        <label class="toggle-label">
                            <input type="checkbox" id="hasSubLessons">
                            <span class="toggle-switch"></span>
                        </label>
                    </div>
                    <p class="toggle-hint">Uygulama/Konu ayrÄ±mÄ± iÃ§in aÃ§Ä±n</p>
                </div>
                <div id="singleLessonFields">
                    <div class="form-group">
                        <label for="totalHours">Toplam Ders Saati</label>
                        <input type="number" id="totalHours" placeholder="Ã–rn: 56" min="1">
                    </div>
                    <div class="form-group">
                        <label for="absenceRate">DevamsÄ±zlÄ±k HakkÄ± (%)</label>
                        <input type="number" id="absenceRate" placeholder="Ã–rn: 30" min="1" max="100">
                    </div>
                </div>
                <div id="subLessonsFields" style="display: none;">
                    <div class="sub-lessons-container" id="subLessonsContainer"></div>
                    <button type="button" class="add-sub-btn" id="addSubLessonBtn"><span>+</span> Alt Ders Ekle</button>
                </div>
                <button type="submit" class="submit-btn">Dersi Ekle</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="noteModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Yeni Not Ekle</h3>
                <button class="close-btn" id="closeNoteModal">&times;</button>
            </div>
            <form id="noteForm">
                <div class="form-group">
                    <label for="noteTitle">Not BaÅŸlÄ±ÄŸÄ±</label>
                    <input type="text" id="noteTitle" placeholder="Ã–rn: SÄ±nav tarihleri" required>
                </div>
                <div class="form-group">
                    <label for="noteContent">Not Ä°Ã§eriÄŸi</label>
                    <textarea id="noteContent" rows="5" placeholder="Notunuzu buraya yazÄ±n..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Renk SeÃ§in</label>
                    <div class="color-picker">
                        <input type="radio" name="noteColor" value="emerald" id="colorEmerald" checked>
                        <label for="colorEmerald" class="color-option green"></label>
                        <input type="radio" name="noteColor" value="pink" id="colorPink">
                        <label for="colorPink" class="color-option pink"></label>
                    </div>
                </div>
                <button type="submit" class="submit-btn">Notu Kaydet</button>
            </form>
        </div>
    </div>
    <!-- Welcome Setup Modal -->
    <div class="modal-overlay" id="welcomeModal">
        <div class="modal">
            <div style="text-align:center; margin-bottom:30px">
                <span style="font-size:4rem">ğŸ“</span>
                <h2 style="font-family:'Outfit',sans-serif; color:var(--text-head); margin-top:15px">HoÅŸ Geldin!</h2>
                <p style="color:var(--text-dim)">Seni tanÄ±yalÄ±m</p>
            </div>
            <form id="welcomeForm">
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">AdÄ±n SoyadÄ±n</label>
                    <input type="text" id="welcomeName" placeholder="Ã–rn: EylÃ¼l YÄ±lmaz" required>
                </div>
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">Okulun</label>
                    <input type="text" id="welcomeSchool" placeholder="Ã–rn: Ä°stanbul Ãœniversitesi" required>
                </div>
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">BÃ¶lÃ¼mÃ¼n</label>
                    <input type="text" id="welcomeDepartment" placeholder="Ã–rn: Bilgisayar MÃ¼hendisliÄŸi">
                </div>
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">SÄ±nÄ±fÄ±n</label>
                    <select id="welcomeGrade">
                        <option value="1. SÄ±nÄ±f">1. SÄ±nÄ±f</option>
                        <option value="2. SÄ±nÄ±f">2. SÄ±nÄ±f</option>
                        <option value="3. SÄ±nÄ±f" selected>3. SÄ±nÄ±f</option>
                        <option value="4. SÄ±nÄ±f">4. SÄ±nÄ±f</option>
                        <option value="YÃ¼ksek Lisans">YÃ¼ksek Lisans</option>
                    </select>
                </div>
                <button type="submit" class="add-btn" style="width:100%; justify-content:center; margin-top:10px">ğŸš€
                    BaÅŸlayalÄ±m!</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>