<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ders devamsƒ±zlƒ±k takibi, not alma ve profil y√∂netimi">
    <title>Eyl√ºl'√ºn Ders Takibi</title>
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ec4899">
    <link rel="apple-touch-icon" href="icon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js');
            });
        }
    </script>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="dashboard-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <h2>Ders <span>Takip</span></h2>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-section="home">
                    <span>Anasayfa</span>
                </button>
                <button class="nav-item" data-section="devamsizlik">
                    <span>Devamsƒ±zlƒ±k</span>
                </button>
                <button class="nav-item" data-section="notlar">
                    <span>Notlarƒ±m</span>
                </button>
                <button class="nav-item" data-section="dersprogrami">
                    <span>Ders Programƒ±</span>
                </button>
                <button class="nav-item" data-section="haftalikplan">
                    <span>Haftalƒ±k Plan</span>
                </button>
                <button class="nav-item" data-section="profil">
                    <span>Profilim</span>
                </button>
                <button class="nav-item" data-section="copkovasi">
                    <span>√á√∂p Kovasƒ±</span>
                </button>
            </nav>
            <div class="sidebar-footer">
                <p>¬© 2026 Ders Takip</p>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-wrapper">
            <!-- Header -->
            <header class="top-bar">
                <button class="mobile-menu-toggle" id="mobileMenuBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="welcome-text">
                    <h1 id="pageTitle">Anasayfa</h1>
                </div>
                <div class="user-info-brief" onclick="navigateTo('profil')" style="cursor:pointer">
                    <img id="headerAvatar" src="" alt="Profil" class="header-avatar">
                </div>
            </header>

            <div class="content-area">
                <!-- Section: Home (Dashboard) -->
                <section id="home-section" class="app-section active">
                    <div class="home-grid">
                        <!-- Stats Grid -->
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-icon-wrapper pink"></div>
                                <div class="stat-content">
                                    <h3 id="statTotalLessons">0</h3>
                                    <p>Toplam Ders</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon-wrapper emerald"></div>
                                <div class="stat-content">
                                    <h3 id="statTotalAbsence">0</h3>
                                    <p>Devamsƒ±zlƒ±k</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon-wrapper purple"></div>
                                <div class="stat-content">
                                    <h3 id="statTotalNotes">0</h3>
                                    <p>Notlar</p>
                                </div>
                            </div>
                        </div>

                        <!-- Today's Plan (Big Focus) -->
                        <div class="today-focus-card">
                            <h2>‚ú® Bug√ºn√ºn Odak Noktasƒ±</h2>
                            <div id="homeTodayPlan" class="focus-content">
                                <!-- Bug√ºn√ºn planƒ± buraya gelecek -->
                            </div>
                        </div>

                        <!-- Right Column: Summary & Activity -->
                        <div class="dashboard-summ-grid">
                            <div class="dashboard-card status-card">
                                <h3>üìä Son Durum</h3>
                                <div id="quickSummary" class="summary-list">
                                    <!-- √ñzet bilgiler JavaScript ile gelecek -->
                                </div>
                            </div>
                        </div>

                        <!-- Ders Programƒ± Widget -->
                        <div class="widget-card home-schedule-widget">
                            <div class="widget-header">
                                <h3>üìÖ Ders Programƒ±</h3>
                                <button class="icon-btn" onclick="navigateTo('dersprogrami')">‚úèÔ∏è</button>
                            </div>
                            <div id="homeScheduleView" class="widget-content">
                                <!-- Program JS ile buraya gelecek -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section: Attendance (Existing) -->
                <section id="devamsizlik-section" class="app-section">
                    <div class="section-controls">
                        <h2>Ders Devamsƒ±zlƒ±k Takibi</h2>
                        <button class="add-btn" id="addLessonBtn"><span>+</span> Ders Ekle</button>
                    </div>
                    <div class="lessons-grid" id="lessonsGrid"></div>
                </section>

                <!-- Section: Notes (Existing) -->
                <section id="notlar-section" class="app-section">
                    <div class="notes-header" style="display:flex; justify-content:space-between; align-items:center;">
                        <h2>üìì Ders Notlarƒ±</h2>
                        <button class="add-btn" id="addNoteBtn"><span>+</span> Not Ekle</button>
                    </div>

                    <!-- Normal Notlar -->
                    <div class="notes-grid" id="notesGrid"></div>
                </section>

                <!-- Section: Ders Programƒ± -->
                <section id="dersprogrami-section" class="app-section">
                    <div class="manual-schedule-container card-panel">
                        <div class="card-header" style="text-align:center; margin-bottom: 25px;">
                            <h2
                                style="font-family:'Outfit', sans-serif; color:var(--text-head); font-size: 1.8rem; margin-bottom: 10px">
                                Haftalƒ±k Ders Programƒ±m</h2>
                            <p style="color:var(--text-dim); font-size: 0.95rem">Derslerini g√ºnlere g√∂re a≈üaƒüƒ±ya
                                yazabilirsin.</p>
                        </div>

                        <div class="schedule-grid" id="scheduleTable">
                            <div class="schedule-day">
                                <div class="day-header">Pazartesi</div>
                                <textarea class="day-input" data-day="pazartesi" rows="1"
                                    placeholder="09:00 - Matematik..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">Salƒ±</div>
                                <textarea class="day-input" data-day="sali" rows="1"
                                    placeholder="Dersleri girin..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">√áar≈üamba</div>
                                <textarea class="day-input" data-day="carsamba" rows="1"
                                    placeholder="Dersleri girin..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">Per≈üembe</div>
                                <textarea class="day-input" data-day="persembe" rows="1"
                                    placeholder="Dersleri girin..."></textarea>
                            </div>
                            <div class="schedule-day">
                                <div class="day-header">Cuma</div>
                                <textarea class="day-input" data-day="cuma" rows="1"
                                    placeholder="Dersleri girin..."></textarea>
                            </div>
                        </div>
                        <button class="add-btn" id="saveScheduleBtn"
                            style="margin-top:25px; width:100%; justify-content:center; padding:18px; font-size:1.1rem">
                            Programƒ± Kaydet</button>
                    </div>
                </section>

                <!-- Section: Haftalƒ±k Plan -->
                <section id="haftalikplan-section" class="app-section">
                    <div class="weekly-plan-container card-panel">
                        <div class="card-header" style="text-align:center; margin-bottom: 25px;">
                            <h2
                                style="font-family:'Outfit', sans-serif; color:var(--text-head); font-size: 1.8rem; margin-bottom: 10px">
                                Haftalƒ±k Plan & G√∂revler</h2>
                            <p style="color:var(--text-dim); font-size: 0.95rem">G√ºnl√ºk g√∂revlerini ekle ve
                                kontrol et.</p>
                        </div>

                        <!-- G√∂rev Ekleme -->
                        <div class="task-add-form" style="margin-bottom:30px">
                            <div class="task-form-grid">
                                <div class="form-group">
                                    <label>G√∂rev Adƒ±</label>
                                    <input type="text" id="newTaskText" placeholder="√ñrn: Analiz dersine √ßalƒ±≈ü...">
                                </div>
                                <div class="form-group">
                                    <label>G√ºn</label>
                                    <select id="newTaskDay">
                                        <option value="pazartesi">Pazartesi</option>
                                        <option value="sali">Salƒ±</option>
                                        <option value="carsamba">√áar≈üamba</option>
                                        <option value="persembe">Per≈üembe</option>
                                        <option value="cuma">Cuma</option>
                                        <option value="cumartesi">Cumartesi</option>
                                        <option value="pazar">Pazar</option>
                                    </select>
                                </div>
                                <button class="add-btn" id="addTaskBtn">+ G√∂rev Ekle</button>
                            </div>
                        </div>

                        <!-- G√ºnl√ºk G√∂rev Listesi -->
                        <div class="weekly-tasks-grid" id="weeklyTasksGrid">
                            <!-- G√∂revler JavaScript ile doldurulacak -->
                        </div>
                    </div>
                </section>

                <!-- Section: Profil -->
                <section id="profil-section" class="app-section">
                    <div class="profile-container">
                        <!-- Profile Header Card -->
                        <div class="profile-header-card">
                            <div class="profile-avatar-large" id="profileAvatarDisplay"
                                style="position:relative; cursor:pointer"
                                onclick="document.getElementById('profilePhotoInput').click()">
                                <img id="profilePhoto" src="" alt="Profil Fotoƒürafƒ±"
                                    style="width:100%; height:100%; object-fit:cover; border-radius:40px; display:none">
                                <span id="profileInitials">üë§</span>
                                <input type="file" id="profilePhotoInput" accept="image/*" style="display:none"
                                    onchange="handleProfilePhoto(event)">
                                <div
                                    style="position:absolute; bottom:-5px; right:-5px; background:var(--brand-primary); width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; border:3px solid white">
                                    üì∑</div>
                            </div>
                            <div class="profile-info-large">
                                <h2 id="profileName">√ñƒürenci ƒ∞smi</h2>
                                <p id="profileSchool">Okul / B√∂l√ºm</p>
                            </div>
                        </div>

                        <!-- Profile Edit Form -->
                        <div class="profile-details-grid">
                            <div class="detail-card">
                                <h3>üìù Ki≈üisel Bilgiler</h3>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">Ad
                                        Soyad</label>
                                    <input type="text" id="editName" placeholder="Ad Soyad">
                                </div>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">Okul
                                        / √úniversite</label>
                                    <input type="text" id="editSchool" placeholder="Okul Adƒ±">
                                </div>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">B√∂l√ºm
                                        / Alan</label>
                                    <input type="text" id="editDepartment" placeholder="B√∂l√ºm / Alan">
                                </div>
                                <div class="form-group" style="margin-bottom:20px">
                                    <label
                                        style="display:block; margin-bottom:8px; font-weight:700; color:var(--text-head)">Sƒ±nƒ±f</label>
                                    <select id="editGrade">
                                        <option value="Hazƒ±rlƒ±k">Hazƒ±rlƒ±k</option>
                                        <option value="1. Sƒ±nƒ±f">1. Sƒ±nƒ±f</option>
                                        <option value="2. Sƒ±nƒ±f">2. Sƒ±nƒ±f</option>
                                        <option value="3. Sƒ±nƒ±f">3. Sƒ±nƒ±f</option>
                                        <option value="4. Sƒ±nƒ±f">4. Sƒ±nƒ±f</option>
                                        <option value="Y√ºksek Lisans">Y√ºksek Lisans</option>
                                        <option value="Doktora">Doktora</option>
                                    </select>
                                </div>
                                <button class="add-btn" onclick="saveProfile()"
                                    style="width:100%; justify-content:center">üíæ Bilgileri Kaydet</button>
                            </div>
                            <div class="detail-card">
                                <h3>üìä ƒ∞statistikler</h3>
                                <div class="info-row"><span>Kayƒ±tlƒ± Ders:</span> <strong id="p-lessons">0</strong></div>
                                <div class="info-row"><span>Toplam Devamsƒ±zlƒ±k:</span> <strong id="p-absence">0
                                        Saat</strong></div>
                                <div class="info-row"><span>Kritik Ders:</span> <strong id="p-critical">0</strong></div>
                                <div class="info-row"><span>Kayƒ±tlƒ± Not:</span> <strong id="p-notes">0</strong>
                                </div>
                                <div class="info-row" style="margin-top:20px"><span>Durum:</span> <span
                                        class="status-badge safe">Aktif √ñƒürenci</span></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section: Trash -->
                <section id="copkovasi-section" class="app-section">
                    <div class="trash-container card-panel">
                        <div class="card-header-row">
                            <h2>üóëÔ∏è √á√∂p Kovasƒ±</h2>
                            <button class="submit-btn" id="emptyTrashBtn"
                                style="width:auto; margin-top:0; padding:12px 25px; background:var(--brand-primary)">
                                üóëÔ∏è √á√∂p√º Temizle
                            </button>
                        </div>
                        <div class="trash-grid" id="trashGrid">
                            <!-- Silinenler buraya -->
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals (Ders Ekleme ve Not Ekleme modallarƒ± aynƒ± kalacak ama CSS'de sidebar'a g√∂re ayarlanacak) -->
    <div class="modal-overlay" id="lessonModal">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h3>Yeni Ders Ekle</h3>
                <button class="close-btn" id="closeLessonModal">&times;</button>
            </div>
            <form id="lessonForm">
                <div class="form-group">
                    <label for="lessonName">Ders Adƒ±</label>
                    <input type="text" id="lessonName" placeholder="√ñrn: Teknik Resim" required>
                </div>
                <div class="form-group toggle-group">
                    <div class="toggle-row">
                        <span class="toggle-text">Alt dersler var mƒ±?</span>
                        <label class="toggle-label">
                            <input type="checkbox" id="hasSubLessons">
                            <span class="toggle-switch"></span>
                        </label>
                    </div>
                    <p class="toggle-hint">Uygulama/Konu ayrƒ±mƒ± i√ßin a√ßƒ±n</p>
                </div>
                <div id="singleLessonFields">
                    <div class="form-group">
                        <label for="totalHours">Toplam Ders Saati</label>
                        <input type="number" id="totalHours" placeholder="√ñrn: 56" min="1">
                    </div>
                    <div class="form-group">
                        <label for="absenceRate">Devamsƒ±zlƒ±k Hakkƒ± (%)</label>
                        <input type="number" id="absenceRate" placeholder="√ñrn: 30" min="1" max="100">
                    </div>
                </div>
                <div id="subLessonsFields" style="display: none;">
                    <div class="sub-lessons-container" id="subLessonsContainer"></div>
                    <button type="button" class="add-sub-btn" id="addSubLessonBtn"><span>+</span> Alt Ders Ekle</button>
                </div>
                <button type="submit" class="submit-btn">Dersi Ekle</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="noteModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Yeni Not Ekle</h3>
                <button class="close-btn" id="closeNoteModal">&times;</button>
            </div>
            <form id="noteForm">
                <div class="form-group">
                    <label for="noteTitle">Not Ba≈ülƒ±ƒüƒ±</label>
                    <input type="text" id="noteTitle" placeholder="√ñrn: Sƒ±nav tarihleri" required>
                </div>
                <div class="form-group">
                    <label for="noteContent">Not ƒ∞√ßeriƒüi</label>
                    <textarea id="noteContent" rows="5" placeholder="Notunuzu buraya yazƒ±n..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Renk Se√ßin</label>
                    <div class="color-picker">
                        <input type="radio" name="noteColor" value="emerald" id="colorEmerald" checked>
                        <label for="colorEmerald" class="color-option green"></label>
                        <input type="radio" name="noteColor" value="pink" id="colorPink">
                        <label for="colorPink" class="color-option pink"></label>
                    </div>
                </div>
                <button type="submit" class="submit-btn">Notu Kaydet</button>
            </form>
        </div>
    </div>
    <!-- Welcome Setup Modal -->
    <div class="modal-overlay" id="welcomeModal">
        <div class="modal">
            <div style="text-align:center; margin-bottom:30px">
                <span style="font-size:4rem">üéì</span>
                <h2 style="font-family:'Outfit',sans-serif; color:var(--text-head); margin-top:15px">Ho≈ü Geldin!</h2>
                <p style="color:var(--text-dim)">Seni tanƒ±yalƒ±m</p>
            </div>
            <form id="welcomeForm">
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">Adƒ±n Soyadƒ±n</label>
                    <input type="text" id="welcomeName" placeholder="√ñrn: Eyl√ºl Yƒ±lmaz" required>
                </div>
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">Okulun</label>
                    <input type="text" id="welcomeSchool" placeholder="√ñrn: ƒ∞stanbul √úniversitesi" required>
                </div>
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">B√∂l√ºm√ºn</label>
                    <input type="text" id="welcomeDepartment" placeholder="√ñrn: Bilgisayar M√ºhendisliƒüi">
                </div>
                <div class="form-group">
                    <label style="display:block; margin-bottom:8px; font-weight:700">Sƒ±nƒ±fƒ±n</label>
                    <select id="welcomeGrade">
                        <option value="1. Sƒ±nƒ±f">1. Sƒ±nƒ±f</option>
                        <option value="2. Sƒ±nƒ±f">2. Sƒ±nƒ±f</option>
                        <option value="3. Sƒ±nƒ±f" selected>3. Sƒ±nƒ±f</option>
                        <option value="4. Sƒ±nƒ±f">4. Sƒ±nƒ±f</option>
                        <option value="Y√ºksek Lisans">Y√ºksek Lisans</option>
                    </select>
                </div>
                <button type="submit" class="add-btn" style="width:100%; justify-content:center; margin-top:10px">üöÄ
                    Ba≈ülayalƒ±m!</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>